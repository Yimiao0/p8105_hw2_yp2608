Homework 2
================
Yimiao Pang

``` r
library(readxl)
library(dplyr)

library(readr)
library(tidyr)

library(tidyverse)
```

## Problem 1

the Mr. Trash Wheel sheet

``` r
# read in
tw_df = read_excel("./data/Trash-Wheel-Collection-Totals-7-2020-2.xlsx", sheet = "Mr. Trash Wheel")

# clean_name
tw_df = janitor::clean_names(tw_df)

# omit rows that do not include dumpster-specific data
tw_df = filter(tw_df, dumpster >= 1 & dumpster != "Grand Total")

# round
tw_df = mutate(tw_df, sports_balls = round(sports_balls))
```

2018 & 2019 Precipitation

``` r
# read in
p18_df = read_excel("./data/Trash-Wheel-Collection-Totals-7-2020-2.xlsx", sheet = "2018 Precipitation", range = "A2:B14")
p19_df = read_excel("./data/Trash-Wheel-Collection-Totals-7-2020-2.xlsx", sheet = "2019 Precipitation", range = "A2:B14")

# omit rows without precipitation data
p18_df = filter(p18_df, Total >= 0)
p19_df = filter(p19_df, Total >= 0)

# add a variable for year
p18_df = mutate(p18_df, Year = 2018)
p19_df = mutate(p19_df, Year = 2019)

# combine 2018 & 2019
p_df = merge(p18_df, p19_df, all = TRUE)
p_df = arrange(p_df, Year, Month)
p_df = mutate(p_df, Month = month.name[Month])
```

``` r
# filter -- trash wheel 2019
tw2019_df = filter(tw_df, year == 2019)
```

There are 12 rows in precipitation data for 2018 and 12 rows for 2019.
The variables include year, month and total. For example, in
precipitation data for 2018, the year variable is 2018, the month
variable includes 12 months in a year and the total variable is the
total number of precipitation for a specific month. The total
precipitation in 2018 is 70.33, and the median number of sports balls in
a dumpster in 2019 is 9.

## Problem 2

``` r
pols_df = read_csv("./data/fivethirtyeight_datasets/pols-month.csv") %>%
  separate(col = mon, into = c("year", "month", "day")) %>%
  mutate(month = month.name[as.numeric(month)],
         president = recode(prez_gop, '0' = "dem", '1' = "gop", '2' = "gop")) %>%
  select(-prez_dem, -prez_gop) %>%
  select(-day)
```

``` r
#read in
snp_df = 
  read_csv("./data/fivethirtyeight_datasets/snp.csv") %>%
  separate(col = date, into = c("month", "day", "year"), sep = "/") %>%
  mutate(month = as.numeric(month),
         year = as.numeric(year))

# mutate year
snp19_df = 
  filter(snp_df, year > 15) %>%
  mutate(year = year + 1900)

snp20_df = 
  filter(snp_df, year <= 15) %>%
  mutate(year = year + 2000)

# in order -- year, month
snp_df = 
  merge(snp19_df, snp20_df, all = TRUE) %>%
  arrange(year, month) %>%
  mutate(month = month.name[month])

# extract year & month
year = select(snp_df, year)
month = select(snp_df, month)
close = select(snp_df, close)

snp_df = cbind(year, month, close)
```

``` r
pols_df_new = 
  merge(pols_df, snp_df, by = c("year", "month"), all = TRUE)

une_df = 
  read_csv("./data/fivethirtyeight_datasets/unemployment.csv") %>%
  janitor::clean_names() %>%
  pivot_longer(
    jan:dec,
    names_to = "month",
    values_to = "unemployment"
  ) %>%
  mutate(month = recode(month, "jan" = "January", "feb" = "February", "mar" = "March", "apr" = "April", "may" = "May", "jun" = "June", "jul" = "July", "aug" = "August", "sep" = "September", "oct" = "October", "nov" = "November", "dec" = "December"))
une_df = filter(une_df, unemployment >= 0)

pols_df_new2 = merge(pols_df_new, une_df, by = c("year", "month"), all = TRUE)
```

``` r
skimr::skim(pols_df)
```

|                                                  |          |
|:-------------------------------------------------|:---------|
| Name                                             | pols\_df |
| Number of rows                                   | 822      |
| Number of columns                                | 9        |
| \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_   |          |
| Column type frequency:                           |          |
| character                                        | 3        |
| numeric                                          | 6        |
| \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_ |          |
| Group variables                                  | None     |

Data summary

**Variable type: character**

| skim\_variable | n\_missing | complete\_rate | min | max | empty | n\_unique | whitespace |
|:---------------|-----------:|---------------:|----:|----:|------:|----------:|-----------:|
| year           |          0 |              1 |   4 |   4 |     0 |        69 |          0 |
| month          |          0 |              1 |   3 |   9 |     0 |        12 |          0 |
| president      |          0 |              1 |   3 |   3 |     0 |         2 |          0 |

**Variable type: numeric**

| skim\_variable | n\_missing | complete\_rate |   mean |    sd |  p0 | p25 | p50 | p75 | p100 | hist  |
|:---------------|-----------:|---------------:|-------:|------:|----:|----:|----:|----:|-----:|:------|
| gov\_gop       |          0 |              1 |  22.48 |  5.68 |  12 |  18 |  22 |  28 |   34 | ▆▆▇▅▅ |
| sen\_gop       |          0 |              1 |  46.10 |  6.38 |  32 |  42 |  46 |  51 |   56 | ▃▃▇▇▇ |
| rep\_gop       |          0 |              1 | 194.92 | 29.24 | 141 | 176 | 195 | 222 |  253 | ▃▇▆▃▅ |
| gov\_dem       |          0 |              1 |  27.20 |  5.94 |  17 |  22 |  28 |  32 |   41 | ▆▅▇▆▂ |
| sen\_dem       |          0 |              1 |  54.41 |  7.37 |  44 |  48 |  53 |  58 |   71 | ▇▆▇▃▂ |
| rep\_dem       |          0 |              1 | 244.97 | 31.37 | 188 | 211 | 250 | 268 |  301 | ▇▂▇▇▅ |

``` r
skimr::skim(snp_df)
```

|                                                  |         |
|:-------------------------------------------------|:--------|
| Name                                             | snp\_df |
| Number of rows                                   | 787     |
| Number of columns                                | 3       |
| \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_   |         |
| Column type frequency:                           |         |
| character                                        | 1       |
| numeric                                          | 2       |
| \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_ |         |
| Group variables                                  | None    |

Data summary

**Variable type: character**

| skim\_variable | n\_missing | complete\_rate | min | max | empty | n\_unique | whitespace |
|:---------------|-----------:|---------------:|----:|----:|------:|----------:|-----------:|
| month          |          0 |              1 |   3 |   9 |     0 |        12 |          0 |

**Variable type: numeric**

| skim\_variable | n\_missing | complete\_rate |    mean |     sd |      p0 |     p25 |     p50 |    p75 |    p100 | hist  |
|:---------------|-----------:|---------------:|--------:|-------:|--------:|--------:|--------:|-------:|--------:|:------|
| year           |          0 |              1 | 1982.29 |  18.95 | 1950.00 | 1966.00 | 1982.00 | 1999.0 | 2015.00 | ▇▇▇▇▇ |
| close          |          0 |              1 |  474.89 | 545.96 |   17.05 |   83.74 |  138.53 |  941.8 | 2107.39 | ▇▁▂▁▁ |

``` r
skimr::skim(une_df)
```

|                                                  |         |
|:-------------------------------------------------|:--------|
| Name                                             | une\_df |
| Number of rows                                   | 810     |
| Number of columns                                | 3       |
| \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_   |         |
| Column type frequency:                           |         |
| character                                        | 1       |
| numeric                                          | 2       |
| \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_ |         |
| Group variables                                  | None    |

Data summary

**Variable type: character**

| skim\_variable | n\_missing | complete\_rate | min | max | empty | n\_unique | whitespace |
|:---------------|-----------:|---------------:|----:|----:|------:|----------:|-----------:|
| month          |          0 |              1 |   3 |   9 |     0 |        12 |          0 |

**Variable type: numeric**

| skim\_variable | n\_missing | complete\_rate |    mean |    sd |     p0 |    p25 |    p50 |    p75 |   p100 | hist  |
|:---------------|-----------:|---------------:|--------:|------:|-------:|-------:|-------:|-------:|-------:|:------|
| year           |          0 |              1 | 1981.25 | 19.50 | 1948.0 | 1964.0 | 1981.0 | 1998.0 | 2015.0 | ▇▇▇▇▇ |
| unemployment   |          0 |              1 |    5.83 |  1.65 |    2.5 |    4.7 |    5.6 |    6.9 |   10.8 | ▃▇▅▂▁ |

``` r
skimr::skim(pols_df_new2)
```

|                                                  |                |
|:-------------------------------------------------|:---------------|
| Name                                             | pols\_df\_new2 |
| Number of rows                                   | 823            |
| Number of columns                                | 11             |
| \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_   |                |
| Column type frequency:                           |                |
| character                                        | 3              |
| numeric                                          | 8              |
| \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_ |                |
| Group variables                                  | None           |

Data summary

**Variable type: character**

| skim\_variable | n\_missing | complete\_rate | min | max | empty | n\_unique | whitespace |
|:---------------|-----------:|---------------:|----:|----:|------:|----------:|-----------:|
| year           |          0 |              1 |   4 |   4 |     0 |        69 |          0 |
| month          |          0 |              1 |   3 |   9 |     0 |        12 |          0 |
| president      |          1 |              1 |   3 |   3 |     0 |         2 |          0 |

**Variable type: numeric**

| skim\_variable | n\_missing | complete\_rate |   mean |     sd |     p0 |    p25 |    p50 |   p75 |    p100 | hist  |
|:---------------|-----------:|---------------:|-------:|-------:|-------:|-------:|-------:|------:|--------:|:------|
| gov\_gop       |          1 |           1.00 |  22.48 |   5.68 |  12.00 |  18.00 |  22.00 |  28.0 |   34.00 | ▆▆▇▅▅ |
| sen\_gop       |          1 |           1.00 |  46.10 |   6.38 |  32.00 |  42.00 |  46.00 |  51.0 |   56.00 | ▃▃▇▇▇ |
| rep\_gop       |          1 |           1.00 | 194.92 |  29.24 | 141.00 | 176.00 | 195.00 | 222.0 |  253.00 | ▃▇▆▃▅ |
| gov\_dem       |          1 |           1.00 |  27.20 |   5.94 |  17.00 |  22.00 |  28.00 |  32.0 |   41.00 | ▆▅▇▆▂ |
| sen\_dem       |          1 |           1.00 |  54.41 |   7.37 |  44.00 |  48.00 |  53.00 |  58.0 |   71.00 | ▇▆▇▃▂ |
| rep\_dem       |          1 |           1.00 | 244.97 |  31.37 | 188.00 | 211.00 | 250.00 | 268.0 |  301.00 | ▇▂▇▇▅ |
| close          |         36 |           0.96 | 474.89 | 545.96 |  17.05 |  83.74 | 138.53 | 941.8 | 2107.39 | ▇▁▂▁▁ |
| unemployment   |         13 |           0.98 |   5.83 |   1.65 |   2.50 |   4.70 |   5.60 |   6.9 |   10.80 | ▃▇▅▂▁ |

In the pols-month dataset, there are 9 columns and 822 rows. The time
range is from January, 1947 to June, 2015. In the snp dataset, there are
3 columns and 787 rows. The time range is from January 1950 to July
2015. And in the unemployment dataset, there are 810 rows and 3 columns
including year, month and unemployment percentage. After joining the
three datasets above, the resulting dataset has 11 columns and 823 rows.
The time range is from January 1947 to July 2015. Its columns include
year, month, gov\_gop, sen\_gop, rep\_gop, gov\_dem, sen\_dem, rep\_dem,
president, close, and unemployment percentage.

## Problem 3

load and tidy

``` r
pbn_df = 
  read_csv("./data/Popular_Baby_Names.csv") %>%
  janitor::clean_names() %>%
  mutate(gender = tolower(gender), 
         ethnicity = tolower(ethnicity), 
         childs_first_name = tolower(childs_first_name),
         ethnicity = recode(ethnicity, 
                             "asian and pacific islander" = "asian and paci",
                             "black non hispanic" = "black non hisp",
                             "white non hispanic" = "white non hisp")) %>%
  distinct(year_of_birth, gender, ethnicity, childs_first_name, .keep_all = TRUE)
```

Olivia

``` r
olivia_df = 
  filter(pbn_df, childs_first_name == "olivia") %>%
  select(-gender, -childs_first_name, -count) %>%
  pivot_wider(
    names_from = "year_of_birth",
    values_from = "rank"
  )
```

The most popular male child name

``` r
male_df = 
  filter(pbn_df, gender == "male" & rank == 1) %>%
  select(-gender, -count, -rank) %>%
  pivot_wider(
    names_from = "year_of_birth",
    values_from = "childs_first_name"
  )
```

male, white non-hispanic, 2016

``` r
mw16_df = 
  filter(pbn_df, gender == "male" & ethnicity == "white non hisp" & year_of_birth == 2016) %>%
  arrange(rank)

ggplot(mw16_df, aes(x = rank, y = count)) + geom_point()
```

![](p8105_hw2_yp2608_files/figure-gfm/unnamed-chunk-8-1.png)<!-- -->
